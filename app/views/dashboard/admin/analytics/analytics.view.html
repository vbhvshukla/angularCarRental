<div class="analytics-wrap" ng-controller="AdminAnalyticsController as vm" ng-init="vm.loadAnalyticsData()" style="flex: auto;">
    <div class="analytics-main" style="width: 100%; max-width: 1158px; margin: 0 auto;">
        <div class="analytics-section" style="width: 100%; background-color: #fff;">
            <h2>Analytics</h2>
            <div class="filter-container">
                <label for="time-range">Filter by:</label>
                <select id="time-range" ng-model="vm.selectedTimeRange" ng-change="vm.loadAnalyticsData()" class="form-control" style="display: inline-block; width: auto;">
                    <option value="7">Last Week</option>
                    <option value="30" selected>Last Month</option>
                    <option value="365">Last Year</option>
                    <option value="1095">Last 3 Years</option>
                </select>
            </div>

            <div class="cards-container" style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
                <div class="card" ng-repeat="card in vm.cards" style="flex: 1; padding: 20px; background-color: #fff; border-radius: 8px; text-align: center; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3 style="margin-bottom: 10px; font-size: 1.2rem; color: #2c3e50;">{{card.title}}</h3>
                    <p style="font-size: 2rem; font-weight: bold; color: #3498db;">{{card.value}}</p>
                </div>
            </div>

            <div class="charts-grid" style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Revenue by Category</h3>
                    <button class="admin-info-button" ng-mouseenter="vm.showCalculations=true" ng-mouseleave="vm.showCalculations = false" style="all: initial; background: none; width: 10px; border: none; padding: 0; margin-left: 0px; cursor: pointer; position: relative; color: #6c757d;">
                        <i class="fa fa-info-circle"></i>
                        <div class="admin-info-tooltip" ng-if="vm.showCalculations" style="position: absolute; bottom: calc(100% + 10px); right: -200px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); width: 280px; z-index: 1000; text-align: left;">
                            <h4 style="margin: 0 0 10px; color: #2c3e50; font-size: 14px; font-weight: 600;">How is Revenue by Category being calculated?</h4>
                            <div class="rate-item" style="margin: 5px 0; font-size: 13px; color: #4a5568;">
                                <span style="font-weight: 500; color: #2d3748; display: inline-block; width: 110px;">Formula:</span> Some formula
                            </div>
                        </div>
                    </button>
                    <canvas id="totalRevenuePerCategoryChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Revenue by City</h3>
                    <canvas id="totalRevenuePerCityChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Average Revenue per User</h3>
                    <canvas id="averageRevenuePerUserChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Bookings Trend</h3>
                    <canvas id="bookingsOverTimeChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Cars by Category</h3>
                    <canvas id="carsPerCategoryChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Top Rated Cars by Category</h3>
                    <canvas id="highestRatedCarCategoryChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Bids by Category</h3>
                    <canvas id="bidsPerCategoryChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Total Bid Amount by Category</h3>
                    <canvas id="totalBiddedPricePerCategoryChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Cars by City</h3>
                    <canvas id="carsPerCityChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>

                <div class="chart-container" style="position: relative; flex: 1; min-width: 45%; height: 400px; background-color: #fff; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); padding: 20px; transition: transform 0.3s, box-shadow 0.3s;">
                    <h3>Revenue Trends</h3>
                    <canvas id="revenueTrendsChart" style="width: 100%; height: 100%; max-height: 350px;"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay" ng-if="vm.loading" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.8); display: flex; justify-content: center; align-items: center; z-index: 1000;">
        <div class="spinner" style="width: 40px; height: 40px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite;"></div>
    </div>
</div>

<style>
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
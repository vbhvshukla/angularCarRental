<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12">
            <div class="allbids-content" ng-controller="UserBidsController" ng-init="vm.init()"
                style="width: 100%; padding: 20px; background-color: #fff; border-radius: 8px; box-shadow: 0 0px 1px rgba(0, 0, 0, 0.1); min-height: 450px; display: flex; flex-direction: column; justify-content: space-between;">

                <div class="table-container table-responsive" style="overflow-x: auto; max-width: 100%;">
                    <h2>Biddings</h2>

                    <!-- Filters Row -->
                    <div class="row" style="margin-bottom: 15px;">
                        <div class="col-xs-6 col-sm-3">
                            <select ng-model="vm.filters.rentalType" ng-change="vm.filterBids()" class="form-control"
                                style="padding: 5px; font-size: 12px; border: 1px solid #bdc3c7; border-radius: 5px; background-color: white; cursor: pointer; color: #2c3e50; height: 34px;">
                                <option value="">All Rental Types</option>
                                <option value="local">Local</option>
                                <option value="outstation">Outstation</option>
                            </select>
                        </div>
                        <div class="col-xs-6 col-sm-3">
                            <select ng-model="vm.filters.status" ng-change="vm.filterBids()" class="form-control"
                                style="padding: 5px; font-size: 12px; border: 1px solid #bdc3c7; border-radius: 5px; background-color: white; cursor: pointer; color: #2c3e50; height: 34px;">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="accepted">Approved</option>
                                <option value="rejected">Rejected</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>

                    <table id="bidding-table" class="table table-hover"
                        style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                        <thead>
                            <tr>
                                <th style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;"
                                    class="hidden-xs">Car</th>
                                <th style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;"
                                    class="hidden-xs">Car Owner</th>
                                <th
                                    style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;">
                                    Bid Amount</th>
                                <th style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;"
                                    class="hidden-xs">Start Date</th>
                                <th style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;"
                                    class="hidden-xs">End Date</th>
                                <th style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;"
                                    class="hidden-xs hidden-sm">Placed At</th>
                                <th
                                    style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;">
                                    Total Amount</th>
                                <th
                                    style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;">
                                    Type</th>
                                <th
                                    style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;">
                                    Status</th>
                                <th
                                    style="background-color: #2c3e50; color: white; cursor: pointer; position: relative;">
                                    Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-show="!vm.bids.length">
                                <td colspan="10" class="text-center">No biddings exist.</td>
                            </tr>
                            <tr ng-repeat="bid in vm.filteredBids"
                                style="padding: 12px; text-align: left; border-bottom: 1px solid #ddd;">
                                <td class="hidden-xs">{{bid.car.carName | capitalize}}</td>
                                <td class="hidden-xs">{{bid.car.owner.username | capitalize}}</td>
                                <td>{{bid.bidAmount | price}}</td>
                                <td class="hidden-xs">{{bid.fromTimestamp | date:'short'}}</td>
                                <td class="hidden-xs">{{bid.toTimestamp | date:'short'}}</td>
                                <td class="hidden-xs hidden-sm">{{bid.createdAt | date:'short'}}</td>
                                <td>{{bid.bidBaseFare | price}}</td>
                                <td>{{bid.rentalType | capitalize}}</td>
                                <td>{{bid.status | capitalize}}</td>
                                <td style="white-space: nowrap;">
                                    <button ng-click="vm.goToMessagePage(bid)"
                                        style="font-size: 13px; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s, transform 0.2s; margin-right: 5px;">
                                        <span class="hidden-xs">Chat</span>
                                        <span class="visible-xs glyphicon glyphicon-comment"></span>
                                    </button>
                                    <button ng-if="bid.status === 'pending'" ng-click="vm.cancelBid(bid)"
                                        style="font-size: 13px; background: linear-gradient(135deg, #d9534f, #c9302c); color: white; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; transition: background-color 0.3s, transform 0.2s;">
                                        <span class="hidden-xs">Cancel</span>
                                        <span class="visible-xs glyphicon glyphicon-remove"></span>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- <div class="pagination-container text-center" style="margin-top: 20px;">
                        <ul uib-pagination 
                            total-items="vm.filteredBids.length" 
                            ng-model="vm.currentPage" 
                            max-size="5"
                            boundary-links="true" 
                            items-per-page="vm.itemsPerPage" 
                            ng-change="vm.updatePagination()">
                        </ul>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Maintain table responsiveness */
    .table-container {
        overflow-x: auto;
        max-width: 100%;
    }

    /* Scrollbar styling */
    .table-container::-webkit-scrollbar {
        height: 8px;
    }

    .table-container::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }

    .table-container::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
    }

    .table-container::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    /* Mobile optimizations */
    @media (max-width: 767px) {

        .table>thead>tr>th,
        .table>tbody>tr>td {
            padding: 8px 4px;
        }

        td[style*="white-space: nowrap"] {
            min-width: 90px;
        }
    }

    /* Ensure consistent table cell padding */
    .table>thead>tr>th,
    .table>tbody>tr>td {
        padding: 12px 8px;
        vertical-align: middle;
    }
</style>